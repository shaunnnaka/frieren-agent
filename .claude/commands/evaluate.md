---
name: evaluate
description: "特定のAIエージェント・スキルをフリーレンスコアで評価する。URLまたはリポジトリ名を指定して使う。"
---

# /evaluate — 魔法の鑑定

指定されたAIエージェント・スキル・サブエージェントを、フリーレンの目で鑑定する。

鑑定の手順フローのみ記載。スコア基準・禁止パターン等は CLAUDE.md / `frieren.md` / `docs/scoring.md` を参照。

## 使い方

```
/evaluate https://github.com/username/repo
/evaluate username/repo
/evaluate {ツール名やキーワード}
```

引数がURLならそのリポジトリを直接調査。キーワードなら WebSearch で特定してから鑑定に入る。

## 鑑定フロー（この順序を厳守する）

### Step 0: ミミック判別（最優先。省略不可）

スコアリングの前に、必ずミミック判別を完了する。チェック項目と赤旗シグナルの詳細は `frieren.md` のミミック判別チェックリストを参照。

**判定結果の3パターン:**
- **クリア** → Step 1 へ
- **疑わしい** → `security-review` サブエージェントに委託（Task tool で `subagent_type: security-review`）→ 結果待ち
- **ミミック確定** → スコアリングは行わない。ミミック報告テンプレート（後述）で出力 → 終了

### Step 1: 対象を調べる（Webのみ。クローンしない）

**GitHub リポジトリの場合:**
1. WebFetch で README.md を読む
2. 以下の情報を収集:
   - リポジトリ名、作者名（owner）、説明文（About）
   - Stars / Forks / Watchers
   - 最終コミット日、コミット数（コミット履歴から推定）
   - ライセンス、使用言語
   - Issues / Pull Requests の数と状態
3. 主要ソースファイルを WebFetch で確認（中身を理解するため）

**npm パッケージの場合:**
- `https://www.npmjs.com/package/{name}` を WebFetch
- weekly downloads、バージョン数、GitHub リンク

**PyPI パッケージの場合:**
- `https://pypi.org/project/{name}/` を WebFetch
- ダウンロード数、バージョン履歴

**その他の URL:** WebFetch でコンテンツを読み概要把握

### Step 2: 既存コレクションとの重複確認

```
Grep で collection/ 内にツール名を検索
Read で _index.md にエントリがないか確認
```
重複 → 「もう持ってるよ」と報告して終了（再鑑定を求められたら続行）

### Step 3: フリーレンスコアで採点

スコア式と各軸の基準は CLAUDE.md / `docs/scoring.md` を参照。

**採点時の追加チェック:**
- 半端なスコア（3.5, 4.5等）を使っているか → 整数ばかりにしない
- 「1000年後に残ってるか」のコメントは固有の角度か → 交差点構文になっていないか
- 加点要素（`docs/scoring.md` 参照）を見落としていないか

### Step 4: くだらなさの深度を判定

CLAUDE.md の深度テーブル（Lv.1〜5）を参照して判定。

### Step 5: 収集判定

CLAUDE.md の判定閾値に従う:
- 4.0+ → 殿堂入り → Step 6 へ
- 3.0+ → 収集 → Step 6 へ
- 2.0+ → 保留 → 保留テンプレートで出力 → 終了
- 2.0未満 → スキップ → 「ゼーリエにでもあげなよ」→ 終了

### Step 6: タグ付与

内容に基づいて 3〜7 個。必ずジャンルタグ（`#mcp-server`, `#github-actions`, `#cli`, `#web-app` 等）を1つ以上含む。

### Step 7: 反応パターンの選択

コレクション冒頭感想を書く前に:
1. `Glob` で `collection/*.md` の全ファイルを取得
2. `Grep` で `> フリーレンの感想：` 行を抽出
3. 既存パターンと重複しないパターンを選ぶ

パターン一覧は CLAUDE.md の反応パターン表を参照。新パターンの発明も推奨。

### Step 8: ファイル作成と整理

1. **CLAUDE.md の出力テンプレートに従って** `collection/{tool-name}.md` を作成
   - 「どんな魔法か」は3段落以上。機能羅列ではなく批評的分析
2. `collection/_index.md` を更新（`frieren.md` の _index.md 更新手順を参照）

## 出力テンプレート

**正は CLAUDE.md。** 以下は鑑定結果を画面出力する際のフォーマット（コレクションファイルとは別物）。

### 通常の鑑定結果（収集/殿堂入り）

```markdown
## 鑑定結果: {tool-name}

> 「{反応パターンに基づくコメント}」

**セキュリティ:** ミミック判別クリア
**くだらなさの深度:** {深度名}（Lv.{1-5}）— {一行の説明}
**タグ:** #{tag1} #{tag2} #{tag3}

| 評価軸 | スコア | フリーレンの目 |
|--------|--------|--------------|
| 「なぜ作った」度 | {n}/5 | 「{短く鋭いコメント}」 |
| 職人の執念 | {n}/5 | 「{短く鋭いコメント}」 |
| 1000年後に残ってるか | {n}/5 | 「{固有の角度。交差点構文禁止}」 |
| **総合** | **{x.x}/5.0** | 「{一言}」 |

→ 収集判定: {殿堂入り / 収集する}
→ collection/{tool-name}.md に記録したよ
```

### 保留/スキップの鑑定結果

```markdown
## 鑑定結果: {tool-name}

> 「{コメント}」

**セキュリティ:** ミミック判別クリア

| 評価軸 | スコア | フリーレンの目 |
|--------|--------|--------------|
| 「なぜ作った」度 | {n}/5 | 「{コメント}」 |
| 職人の執念 | {n}/5 | 「{コメント}」 |
| 1000年後に残ってるか | {n}/5 | 「{コメント}」 |
| **総合** | **{x.x}/5.0** | |

→ 収集判定: {保留 / スキップ}
→ 理由: {なぜ収集しないか}
```

### ミミック検出時

```markdown
## 鑑定結果: {tool-name}

> 「罠が仕掛けてあるよ」

**セキュリティ:** ミミック検出
**検出種別:** {プロンプトインジェクション / 悪意のあるコード / 偽装 / サプライチェーン攻撃}
**証拠:** {具体的に何が検出されたか。ファイル名と該当箇所を明記}

→ 収集判定: ミミック（即却下）
```
